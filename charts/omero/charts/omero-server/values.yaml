# Default values for omero-server.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
## @section Global parameters
## Please, note that this will override the parameters, including dependencies, configured to use the global value
##
global:
  ## @param global.imageRegistry Global Docker image registry
  ##
  imageRegistry: ""
  ## @param global.imagePullSecrets Global Docker registry secret names as an array
  ## e.g.
  ## imagePullSecrets:
  ##   - myRegistryKeySecretName
  ##
  imagePullSecrets: []
  ## @param global.storageClass Global StorageClass for Persistent Volume(s)
  ##
  storageClass: ""
  postgresql:
    ## @param global.postgresql.auth.postgresPassword Password for the "postgres" admin user (overrides `auth.postgresPassword`)
    ## @param global.postgresql.auth.username Name for a custom user to create (overrides `auth.username`)
    ## @param global.postgresql.auth.password Password for the custom user to create (overrides `auth.password`)
    ## @param global.postgresql.auth.database Name for a custom database to create (overrides `auth.database`)
    ## @param global.postgresql.auth.existingSecret Name of existing secret to use for PostgreSQL credentials (overrides `auth.existingSecret`).
    ## @param global.postgresql.auth.secretKeys.adminPasswordKey Name of key in existing secret to use for PostgreSQL credentials (overrides `auth.secretKeys.adminPasswordKey`). Only used when `global.postgresql.auth.existingSecret` is set.
    ## @param global.postgresql.auth.secretKeys.userPasswordKey Name of key in existing secret to use for PostgreSQL credentials (overrides `auth.secretKeys.userPasswordKey`). Only used when `global.postgresql.auth.existingSecret` is set.
    ## @param global.postgresql.auth.secretKeys.replicationPasswordKey Name of key in existing secret to use for PostgreSQL credentials (overrides `auth.secretKeys.replicationPasswordKey`). Only used when `global.postgresql.auth.existingSecret` is set.
    ##
    auth:
      postgresPassword: ""
      username: ""
      password: ""
      database: ""
      existingSecret: ""
      secretKeys:
        adminPasswordKey: ""
        userPasswordKey: ""
        replicationPasswordKey: ""
    ## @param global.postgresql.service.ports.postgresql PostgreSQL service port (overrides `service.ports.postgresql`)
    ##
    service:
      ports:
        postgresql: ""

## @section Config parameters (https://docs.openmicroscopy.org/omero/5.6.3/sysadmins/config.html)
omero:
  root_pass: ""
  # Binary repository
  # @param omero.checksum.supported Checksum algorithms supported by the server for new file uploads
  # @param omero.data.dir 
  checksum:
    supported: "SHA1-160,MD5-128,Murmur3-128,Murmur3-32,CRC-32,Adler-32,File-Size-64"
  data:
    dir: "/OMERO"
  # @param omero.fs.repo.path Template for FS managed repository paths
  # @param omero.fs.repo.path_rules Rules to apply to judge the acceptability of FS paths for writing into omero.managed.dir
  fs:
    repo:
      path: "%user%_%userId%//%year%-%month%/%day%/%time%" #https://docs.openmicroscopy.org/omero/5.6.1/sysadmins/fs-upload-configuration.html
      path_rules: "Windows required,UNIX required"
  # @param omero.managed.dir 
  managed:
    dir: "${omero.data.dir}/ManagedRepository"
  # https://docs.openmicroscopy.org/omero/5.6.1/sysadmins/config.html#client
  # @param omero.client.browser.thumb_default_size The default thumbnail size
  # @param omero.client.download_as.max_size Clients disable download as jpg/png/tiff above max pixel count
  # @param omero.client.icetransports Comma separated list of Ice transports available to clients
  # @param omero.client.scripts_to_ignore Server-side scripts used in IScript service Clients shouldn’t display
  # @param omero.client.ui.menu.dropdown.colleagues.enabled Flag to show/hide colleagues
  # @param omero.client.ui.menu.dropdown.colleagues.label Client dropdown menu colleagues label
  # @param omero.client.ui.menu.dropdown.everyone.enabled Flag to show/hide all users
  # @param omero.client.ui.menu.dropdown.everyone.label Client dropdown menu all users label
  # @param omero.client.ui.menu.dropdown.leaders.enabled Flag to show/hide leader
  # @param omero.client.ui.menu.dropdown.leaders.label Client dropdown menu leader label
  # @param omero.client.ui.tree.orphans.description Description of the “Orphaned images” container
  # @param omero.client.ui.tree.orphans.enabled Flag to show/hide “Orphaned images” container
  # @param omero.client.ui.tree.orphans.name Name of the “Orphaned images” container located in client tree data manager
  # @param omero.client.ui.tree.type_order Client tree type order rank list first type is ranked 1 (the highest), last is the lowest if set to ‘false’ empty list allows mixing all types and sorting them by default client ordering strategy
  # @param omero.client.viewer.initial_zoom_level Initial client image viewer zoom level for big images
  # @param omero.client.viewer.interpolate_pixels Client viewers interpolate pixels by default
  # @param omero.client.viewer.roi_limit Client viewers roi limit
  # @param omero.client.web.host Absolute omeroweb host http(s)://your_domain/prefix/
  client:
    browser:
      thumb_default_size: 96
    download_as:
      max_size: 144000000
    icetransports: "ssl,tcp"
    scripts_to_ignore: "/omero/figure_scripts/Movie_Figure.py,/omero/figure_scripts/Split_View_Figure.py,/omero/figure_scripts/Thumbnail_Figure.py,/omero/figure_scripts/ROI_Split_Figure.py,/omero/export_scripts/Make_Movie.py,/omero/import_scripts/Populate_ROI.py"
    ui:
      menu:
        dropdown:
          colleagues:
            enabled: true
            label: "Members"
          everyone:
            enabled: true
            label: "All Members"
          leaders:
            enabled: true
            label: "Owners"
      tree:
        orphans:
          description: "This is a virtual container with orphaned images. These images are not linked anywhere. Just drag them to the selected container."
          enabled: true
          name: "Orphaned Images"
          type_order: "tagset,tag,project,dataset,screen,plate,acquisition,image"
    viewer:
      initial_zoom_level: 0
      interpolate_pixels: true
      roi_limit: 2000
    web:
      host: ""
  # https://docs.openmicroscopy.org/omero/5.6.1/sysadmins/config.html#database
  # @param omero.db.authority The string that will be used as the base for LSIDs in all exported OME objects including OME-XML and OME-TIFF
  # @param omero.db.dialect Implementation of the org.hibernate.dialect.Dialect interface which will be used to convert HQL queries and save operations into SQL SELECTs and DML statements
  # @param omero.db.driver JDBC driver used to access the database
  # @param omero.db.host The host name of the machine on which the database server is running
  # @param omero.db.name The name of the database instance to which OMERO will connect
  # @param omero.db.pass The password to use to connect to the database server
  # @param omero.db.patch The patch version of the database which is in use
  # @param omero.db.poolsize Sets the number of database server connections which will be used by OMERO
  # @param omero.db.port TCP port on which the database server is listening for connections
  # @param omero.db.prepared_statement_cache_size 
  # @param omero.db.profile Default values for the current profile will be hard-coded into the hibernate.properties file in the model-*.jar
  # @param omero.db.sql_action_class Implementation of the ome.util.SqlAction interface which will be used to perform all direct SQL actions
  # @param omero.db.statistics Whether JMX statistics are collected for DB usage
  # @param omero.db.user The username to use to connect to the database server
  # @param omero.db.version Version of the database which is in use
  db:
    authority: export.openmicroscopy.org
    dialect: ome.util.PostgresqlDialect
    driver: org.postgresql.Driver
    host: localhost
    name: omero
    pass: omero
    patch: 0
    poolsize: 10
    port: 5432
    prepared_statement_cache_size: 10
    profile: psql
    sql_action_class: ome.util.actions.PostgresSqlAction
    statistics: true
    user: omero
    version: OMERO5.4

replicaCount: 1

image:
  repository: openmicroscopy/omero-server
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext:
  # capabilities:
  #   drop:
  #   - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  port: 4063

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}
